# KingdomsLoad

#### 팀 구성
- gunkim
- sangpar

#### 브랜치 전략
- Github-flow 

#### 1차 목표
1. 안드로이드 도커 사용 여부 확인
-> 사용가능. 그러나 CPU점유율이 생각보다 높음. 이부분은 차후에 emulator에 할당되는 자원을 적게 주면 될거같음. 적게줬을때 매크로 내용에 지장이 있을 수도 있음. 일단 진행
   
2. 안드로이드 도커를 이용한 조작여부 확인
-> Appium을 이용하여 간단하게 조작되는 여부를 확인
   
3. 안드로이드 도커를 이용한 제약 사항 확인
  3-1. 동일한 IP로 몇개까지의 접속이 가능한지 -> 6개 이상 접속되는것을 확인
   - 기존의 정식 제공 툴은 5개까지. 즉 IP당 5개 제한 이런건 없는듯 보임
  3-2. 하나의 안드로이드 시뮬레이터가 얼마만한 CPU 용량을 차지하는지 확인하기
   - 현재 하나당 로컬 기준 10%남짓인데 정확하게 측정은 어렵고 차후 줄여야한다면 CPU할당량을 줄이는 옵션을 생각할것
  3.3. Appium으로 다수의 컨테이너를 컨트롤 할 수 있는지 확인
   - Appium 하나당 1개의 컨트롤이 가능한것으로 추정됨
   - 이것을 해결하기 위해 서비스 구조도를 그에 맞게 변경 ( 생성되는 컨테이너에 에뮬레이터 + appium + 스크립트 코드 가 포함되어있는 형태)

#### 1차 목표를 완료 한 후 생각되는 아키텍쳐 구조
1. 특이사항
- backend docker를 실행할때 docker관련 파일을 공유하여 backend도 docker지만 docker생성을 할수 있게 만듬
- docker 네트워크를 공유함으로써 별도의 포트포워딩 없이 backend에서 emaultor를 컨트롤할 container의 fast-api로 통신

2. 문제점이라고 생각되는점
- 서비스가 확장되어 내부 리소스가 모자랄 경우 더 확장이 힘들 수 있음 (요청시 docker를 요청하는 형태라)
- 확장이 필요 할 경우는 docker cotainer를 aws ec2로 대체할때 고쳐야할 사항이 많음 (인프라 자체가 바뀌는 부분이라)
- 처음부터 aws ec2를 emulator로 사용하지 않는 이유는 recapcha와 요금 문제를 고려해서 로컬로 결정(emulator가 생각보다 무거웠음으로 요금이 많이 발생할거로 예상됨)  
![2024-06-19 오전 12-16-49](https://github.com/kingdomsLoad/KingdomsLoad/assets/57505385/40dfc182-0c06-40d4-93ab-5187ba898f73)
